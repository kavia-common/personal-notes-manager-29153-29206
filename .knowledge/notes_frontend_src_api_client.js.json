{"is_source_file": true, "format": "JavaScript", "description": "This file defines a client-side API wrapper for a web application, providing functions for authentication and note management, with JWT token handling, API URL resolution, and fetch-based HTTP requests.", "external_files": ["localStorage (browser API)", "window (browser API)", "fetch (browser API)"], "external_methods": ["localStorage.setItem", "localStorage.getItem", "localStorage.removeItem", "window.dispatchEvent", "fetch", "CustomEvent"], "published": ["setAuthToken", "getAuthToken", "getApiBaseUrl", "api"], "classes": [], "methods": [{"name": "setAuthToken(token)", "description": "Stores JWT token in memory and localStorage as fallback, supporting logout by clearing token.", "scope": "", "scopeKind": ""}, {"name": "getAuthToken()", "description": "Retrieves JWT token from memory or localStorage, ensuring persistence across page reloads.", "scope": "", "scopeKind": ""}, {"name": "getApiBaseUrl()", "description": "Resolves base API URL from environment variables or falls back to window location origin.", "scope": "", "scopeKind": ""}, {"name": "request(path, { method = 'GET', body, headers = {}, requireAuth = true } = {})", "description": "Internal function that performs HTTP requests with JSON payload handling, JWT authentication, and 401 error processing.", "scope": "", "scopeKind": ""}], "calls": ["localStorage.setItem", "localStorage.removeItem", "localStorage.getItem", "fetch", "window.dispatchEvent", "setAuthToken"], "search-terms": ["JWT auth", "fetch API client", "React environment variables", "API request helper", "auth token management", "notes API"], "state": 2, "file_id": 14, "knowledge_revision": 50, "git_revision": "", "revision_history": [{"31": ""}, {"50": ""}], "ctags": [{"_type": "tag", "name": "Content-Type", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-29153-29206/notes_frontend/src/api/client.js", "pattern": "/^    'Content-Type': 'application\\/json',$/", "language": "JavaScript", "kind": "property", "scope": "request.finalHeaders", "scopeKind": "class"}, {"_type": "tag", "name": "api", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-29153-29206/notes_frontend/src/api/client.js", "pattern": "/^export const api = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "auth", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-29153-29206/notes_frontend/src/api/client.js", "pattern": "/^  auth: {$/", "language": "JavaScript", "kind": "class", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-29153-29206/notes_frontend/src/api/client.js", "pattern": "/^    create: (payload) => request('\\/notes', { method: 'POST', body: payload }),$/", "language": "JavaScript", "kind": "property", "scope": "api.notes", "scopeKind": "class"}, {"_type": "tag", "name": "finalHeaders", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-29153-29206/notes_frontend/src/api/client.js", "pattern": "/^  const finalHeaders = {$/", "language": "JavaScript", "kind": "class", "scope": "request", "scopeKind": "class"}, {"_type": "tag", "name": "getApiBaseUrl", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-29153-29206/notes_frontend/src/api/client.js", "pattern": "/^export function getApiBaseUrl() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getAuthToken", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-29153-29206/notes_frontend/src/api/client.js", "pattern": "/^export function getAuthToken() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "inMemoryToken", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-29153-29206/notes_frontend/src/api/client.js", "pattern": "/^let inMemoryToken = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-29153-29206/notes_frontend/src/api/client.js", "pattern": "/^    list: ({ search = '', page = 1, page_size = 10 } = {}) =>$/", "language": "JavaScript", "kind": "property", "scope": "api.notes", "scopeKind": "class"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-29153-29206/notes_frontend/src/api/client.js", "pattern": "/^    login: (email, password) => request('\\/auth\\/login', { method: 'POST', body: { email, passwo/", "language": "JavaScript", "kind": "property", "scope": "api.auth", "scopeKind": "class"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-29153-29206/notes_frontend/src/api/client.js", "pattern": "/^  notes: {$/", "language": "JavaScript", "kind": "class", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-29153-29206/notes_frontend/src/api/client.js", "pattern": "/^    register: (email, password) => request('\\/auth\\/register', { method: 'POST', body: { email, /", "language": "JavaScript", "kind": "property", "scope": "api.auth", "scopeKind": "class"}, {"_type": "tag", "name": "remove", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-29153-29206/notes_frontend/src/api/client.js", "pattern": "/^    remove: (id) => request(`\\/notes\\/${id}`, { method: 'DELETE' }),$/", "language": "JavaScript", "kind": "property", "scope": "api.notes", "scopeKind": "class"}, {"_type": "tag", "name": "request", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-29153-29206/notes_frontend/src/api/client.js", "pattern": "/^async function request(path, { method = 'GET', body, headers = {}, requireAuth = true } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, { method = 'GET', body, headers = {}, requireAuth = true } = {})"}, {"_type": "tag", "name": "setAuthToken", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-29153-29206/notes_frontend/src/api/client.js", "pattern": "/^export function setAuthToken(token) {$/", "language": "JavaScript", "kind": "function", "signature": "(token)"}, {"_type": "tag", "name": "update", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-29153-29206/notes_frontend/src/api/client.js", "pattern": "/^    update: (id, payload) => request(`\\/notes\\/${id}`, { method: 'PUT', body: payload }),$/", "language": "JavaScript", "kind": "property", "scope": "api.notes", "scopeKind": "class"}], "hash": "a07b94d6d609b8a1699b2ec4c9c3f71f", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/api/client.js", "fields": [{"name": "'Content-Type': 'application\\/json',", "scope": "request.finalHeaders", "scopeKind": "class", "description": "unavailable"}, {"name": "create: (payload) => request('\\/notes', { method: 'POST', body: payload }),", "scope": "api.notes", "scopeKind": "class", "description": "unavailable"}, {"name": "let inMemoryToken = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list: ({ search = '', page = 1, page_size = 10 } = {}) =>", "scope": "api.notes", "scopeKind": "class", "description": "unavailable"}, {"name": "login: (email, password) => request('\\/auth\\/login', { method: 'POST', body: { email, passwo/", "scope": "api.auth", "scopeKind": "class", "description": "unavailable"}, {"name": "register: (email, password) => request('\\/auth\\/register', { method: 'POST', body: { email, /", "scope": "api.auth", "scopeKind": "class", "description": "unavailable"}, {"name": "remove: (id) => request(`\\/notes\\/${id}`, { method: 'DELETE' }),", "scope": "api.notes", "scopeKind": "class", "description": "unavailable"}, {"name": "update: (id, payload) => request(`\\/notes\\/${id}`, { method: 'PUT', body: payload }),", "scope": "api.notes", "scopeKind": "class", "description": "unavailable"}]}